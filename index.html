<!DOCTYPE html>
<html lang="zh-cn">

<head>
	<meta charset="UTF-8">
	<title>wbw121124's blog</title>
	<link rel="stylesheet" href="./highlight/styles/github-dark.min.css">
	<link rel="stylesheet" href="./katex/katex.min.css">
</head>

<body>
	<main id="blog-main"></main>
	<!--marked+KaTeX+highlight-->
	<script src="./katex/katex.min.js"></script>
	<script src="./katex/contrib/auto-render.min.js"></script>
	<script src="./highlight/highlight.min.js"></script>
	<script defer>
		var url = new URL(top.location.href);
		var params = new URLSearchParams(url.search);

		// 获取单个参数url
		var param1 = params.get('blog');

		if (!param1) {
			param1 = 'index.md';
		}

		//get博客内容
		fetch('/md/' + param1)
			.then(response => {
				if (!response.ok) {
					throw new Error('Network response was not ok ' + response.statusText);
				}
				return response.text(); // 或者 response.json()，取决于响应的内容类型
			})
			.then(data => {
				var md = data;
				var html = md;
				document.getElementById('blog-main').innerHTML = html;
				renderMathInElement(document.body, {
					delimiters: [
						{ left: '$$', right: '$$', display: true },
						{ left: '$', right: '$', display: false },
					],
				});
				/*const codeBlocks = document.querySelectorAll('#blog-main pre code');

				// 使用forEach遍历所有code元素
				codeBlocks.forEach((codeBlock) => {
					// 使用hljs库的highlight方法来渲染代码块
					hljs.highlightBlock(codeBlock);
				});*/
				hljs.highlightAll();//高亮代码
			})
			.catch(error => {
				console.error('There has been a problem with your fetch operation:', error);
			});
	</script>
</body>

</html>